<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Explore Restaurants - FoodShare</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='main.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
<div class="navbar">
<a href="{{  url_for('buyer_dashboard') }}" class="active">Buyer Dashboard</a>
<a href="{{  url_for('change_password') }}">My Profile</a> <!-- TODO Change to profile page later -->
<a href="">Order History</a>
<a href="">Chats</a>
<a href="{{  url_for('logout_page') }}" class="split">Logout</a>
<a href="{{  url_for('seller_dashboard') }}" class="split">To Seller View</a>
</div>
<h1>Restaurants Near You</h1>
{% for restaurant in restaurants[:8] %} <!-- Closest 8 restaurants -->
<div class="restaurant">
    <a href="/restaurants/{{ restaurant.restid }}">
        <img src="/uploads/{{ restaurant.coverpic }}" height="75" width="75">
        <h3>{{ restaurant.name }}</h3>
    </a>
    {% if restaurant.avgreview %}
        {{ '&nbsp;<span class="fa fa-star checked"></span>'|safe * restaurant.avgreview|int }}
        {{ '<span class="fa fa-star"></span>&nbsp;'|safe * (5-restaurant.avgreview|int) }}
        {{ restaurant.avgreview }} stars
        <br>
    {% endif %}
    {% if restaurant.distance >= 1000 %}
        {{ "%.1f"|format(restaurant.distance / 1000) }} km away
    {% else %}
        {{ restaurant.distance|round(-1, 'ceil')|int }} m away
    {% endif %}
        <br>
</div>
{% if restaurant == restaurant[8] %}
<h1>Other Restaurants</h1>
{% endif %}
{% endfor %}
<div id="snackbar"></div>
<script src="{{ url_for('static', filename='main.js') }}"></script>
{% if alert %}
<script>
    notify("{{ alert }}");
</script>
{% endif %}
</body>
</html>
